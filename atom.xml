<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://dzkjz.github.io/</id>
    <title>JojoLegend</title>
    <updated>2020-10-17T06:34:32.503Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://dzkjz.github.io/"/>
    <link rel="self" href="https://dzkjz.github.io/atom.xml"/>
    <subtitle>Something for age</subtitle>
    <logo>https://dzkjz.github.io/images/avatar.png</logo>
    <icon>https://dzkjz.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, JojoLegend</rights>
    <entry>
        <title type="html"><![CDATA[使用Yandex 做域名邮箱]]></title>
        <id>https://dzkjz.github.io/post/shi-yong-yandex-zuo-yu-ming-you-xiang/</id>
        <link href="https://dzkjz.github.io/post/shi-yong-yandex-zuo-yu-ming-you-xiang/">
        </link>
        <updated>2020-10-17T06:28:00.000Z</updated>
        <content type="html"><![CDATA[<figure data-type="image" tabindex="1"><img src="https://raw.githubusercontent.com/dzkjz/images-repo/master/20201017143012.png" alt="" loading="lazy"></figure>
<p>第二，点开下拉</p>
<figure data-type="image" tabindex="2"><img src="https://raw.githubusercontent.com/dzkjz/images-repo/master/20201017143054.png" alt="" loading="lazy"></figure>
<p>第三步：</p>
<figure data-type="image" tabindex="3"><img src="https://raw.githubusercontent.com/dzkjz/images-repo/master/20201017143155.png" alt="" loading="lazy"></figure>
<p>第4步 add a domain</p>
<figure data-type="image" tabindex="4"><img src="https://raw.githubusercontent.com/dzkjz/images-repo/master/20201017143244.png" alt="" loading="lazy"></figure>
<p>第5：输入域名</p>
<figure data-type="image" tabindex="5"><img src="https://raw.githubusercontent.com/dzkjz/images-repo/master/20201017143329.png" alt="" loading="lazy"></figure>
<p>第6选择DNS 验证去域名注册商注册然后验证即可。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[关于adsense的文章]]></title>
        <id>https://dzkjz.github.io/post/guan-yu-adsense-de-wen-zhang/</id>
        <link href="https://dzkjz.github.io/post/guan-yu-adsense-de-wen-zhang/">
        </link>
        <updated>2020-10-16T13:39:45.000Z</updated>
        <content type="html"><![CDATA[<p>为什么最好是写那种流量文，新闻，垃圾文；<br>
首先，如果你的站点是起步做，如果不是瞄准某一个niche，收割很长尾的流量；<br>
那做新闻，热点文，最容易拿到流量。门事件一篇文，总流量1个亿你拿到一点点也许就是niche文的几百倍。<br>
如果做垃圾词堆长尾，这样也能收割很多小流量，百万文章，10万篇来的流量也是很大的。<br>
还有就是图片，下载资源流；但是搞笑流就比较难转，单价比较低。<br>
要么就是小说，电影流。<br>
而如果瞄准做一个类似中药健康保健类的，文章抄抄改改，也可以瞄准热点新闻再伪原创。<br>
游戏类流量也可以。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Laravel Eloquent: Relationships学习提纲]]></title>
        <id>https://dzkjz.github.io/post/laravel-eloquent-relationships-xue-xi-ti-gang/</id>
        <link href="https://dzkjz.github.io/post/laravel-eloquent-relationships-xue-xi-ti-gang/">
        </link>
        <updated>2020-09-04T05:57:55.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p><strong>带着问题学，文档里介绍的功能在什么情况下使用？这些功能有什么用？具体使用方法直接查看官方文档！</strong></p>
</blockquote>
<h3 id="存取器和更改器"><a href="https://laravel.com/docs/7.x/eloquent-mutators#accessors-and-mutators">存取器和更改器</a></h3>
<p>如果需要在返回的模型实例数据【返回的array和json api都自动添加上】后追加自定义的存取器值，先定义一个存取器【类似于计算属性】，</p>
<pre><code class="language-php">   public function getIsAdminAttribute()
    {
        return $this-&gt;attributes['admin'] === 'yes';
    }
</code></pre>
<p>然后再在模型类的appends属性array中，添加存储器的snake属性字符串</p>
<pre><code class="language-php">class User extends Model
{
    /**
     * The accessors to append to the model's array form.
     *
     * @var array
     */
    protected $appends = ['is_admin'];
}
</code></pre>
<h3 id="属性转换"><a href="https://laravel.com/docs/7.x/eloquent-mutators#attribute-casting">属性转换</a></h3>
<blockquote>
<p>$casts属性</p>
<p>自定义Cast类</p>
<h4 id="array-json-casting"><a href="https://laravel.com/docs/7.x/eloquent-mutators#array-and-json-casting">Array &amp; JSON Casting</a></h4>
<h4 id="date-casting"><a href="https://laravel.com/docs/7.x/eloquent-mutators#date-casting">Date Casting</a></h4>
<h4 id="query-time-casting"><a href="https://laravel.com/docs/7.x/eloquent-mutators#query-time-casting">Query Time Casting</a></h4>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Laravel Eloquent: Getting Started学习提纲]]></title>
        <id>https://dzkjz.github.io/post/laravel-eloquent-getting-started-xue-xi-ti-gang/</id>
        <link href="https://dzkjz.github.io/post/laravel-eloquent-getting-started-xue-xi-ti-gang/">
        </link>
        <updated>2020-09-04T03:00:29.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p><strong>带着问题学，文档里介绍的功能在什么情况下使用？这些功能有什么用？具体使用方法直接查看官方文档！</strong></p>
</blockquote>
<p>如果需要对指定模型的查询请求添加全局作用域，可以参考<a href="https://laravel.com/docs/7.x/eloquent#global-scopes">Global Scopes</a></p>
<blockquote>
<p>其内部的apply方法会对今后作用于此模型的查询都起限定作用。</p>
</blockquote>
<p>Eloquent的操作会触发一系列的事件，请查看<a href="https://laravel.com/docs/7.x/eloquent#events">Events</a></p>
<blockquote>
<p>​	Eloquent models fire several events, allowing you to hook into the following points in a model's lifecycle: <code>retrieved</code>, <code>creating</code>, <code>created</code>, <code>updating</code>, <code>updated</code>, <code>saving</code>, <code>saved</code>, <code>deleting</code>, <code>deleted</code>, <code>restoring</code>, <code>restored</code>. Events allow you to easily execute code each time a specific model class is saved or updated in the database. Each event receives the instance of the model through its constructor.</p>
<p>The <code>retrieved</code> event will fire when an existing model is retrieved from the database. When a new model is saved for the first time, the <code>creating</code> and <code>created</code> events will fire. The <code>updating</code> / <code>updated</code> events will fire when an existing model is modified and the <code>save</code> method is called. The <code>saving</code> / <code>saved</code> events will fire when a model is created or updated.</p>
<blockquote>
<p>When issuing a mass update or delete via Eloquent, the <code>saved</code>, <code>updated</code>, <code>deleting</code>, and <code>deleted</code> model events will not be fired for the affected models. This is because the models are never actually retrieved when issuing a mass update or delete.</p>
</blockquote>
</blockquote>
<p>如果需要监听模型上多个事件，建议代码重新组织，Laravel提供了一个Observer方式，查看<a href="https://laravel.com/docs/7.x/eloquent#observers">Observers</a></p>
<blockquote>
<p><code>php artisan make:observer UserObserver --model=User</code></p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Laravel Redis学习提纲]]></title>
        <id>https://dzkjz.github.io/post/laravel-redis-xue-xi-ti-gang/</id>
        <link href="https://dzkjz.github.io/post/laravel-redis-xue-xi-ti-gang/">
        </link>
        <updated>2020-09-03T16:26:15.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p><strong>带着问题学，文档里介绍的功能在什么情况下使用？这些功能有什么用？具体使用方法直接查看官方文档！</strong></p>
</blockquote>
<p>Redis 键值存储</p>
<p>配置Redis 需安装扩展包，以及在database.php中配置<code>redis</code>选项。</p>
<p><code>database.php</code>中的默认配置一般足够应付开发需要。但是也可以自己修改。</p>
<blockquote>
<p>可以参考 <a href="https://laravel.com/docs/7.x/redis#configuration">Configuration</a></p>
</blockquote>
<p>注意 <a href="https://laravel.com/docs/7.x/redis#predis">Predis</a> 以及 <a href="https://laravel.com/docs/7.x/redis#phpredis">PhpRedis</a></p>
<blockquote>
<p>If you plan to use PhpRedis extension along with the <code>Redis</code> Facade alias, you should rename it to something else, like <code>RedisManager</code>, to avoid a collision with the Redis class. You can do that in the aliases section of your <code>app.php</code> config file.</p>
<pre><code class="language-php">'RedisManager' =&gt; Illuminate\Support\Facades\Redis::class,
</code></pre>
</blockquote>
<h3 id="interacting-with-redis"><a href="https://laravel.com/docs/7.x/redis#interacting-with-redis">Interacting With Redis</a></h3>
<pre><code class="language-php">// Laravel uses magic methods to pass the commands to the Redis server,
// so pass the arguments the Redis command expects:
Redis::set('name', 'Taylor');

$values = Redis::lrange('names', 5, 10);

// Alternatively, you may also pass commands to the server using the command method,
// which accepts the name of the command as its first argument,
// and an array of values as its second argument:

$values = Redis::command('lrange', ['name', 5, 10]);

// You may get a Redis instance by calling the Redis::connection method:
// This will give you an instance of the default Redis server
$redis = Redis::connection();


// You may also pass the connection or cluster name to the connection method to
// get a specific server or cluster as defined in your Redis configuration:
$redis = Redis::connection('my-connection');


// 一次要向redis服务器发送多个命令，建议使用管道
Redis::pipeline(
// 管道方法接受一个闭包作为参数，这个闭包参数是redis实例
    function ($pipe) {
        //把你要执行的命令通过闭包一次发送到redis服务器，提供了更好的性能
    for ($i = 0; $i &lt; 1000; $i++) {
        $pipe-&gt;set(&quot;key:$i&quot;, $i);
    }
});
</code></pre>
<h3 id="pub-sub"><a href="https://laravel.com/docs/7.x/redis#pubsub">Pub / Sub</a></h3>
<pre><code>// pub sub 命令 可以于一个指定信道监听获取消息
// 可以从其他应用发消息，甚至使用其他的编程语言 可以在进程、应用之间通信
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Laravel Database Seeding学习提纲]]></title>
        <id>https://dzkjz.github.io/post/laravel-database-seeding-xue-xi-ti-gang/</id>
        <link href="https://dzkjz.github.io/post/laravel-database-seeding-xue-xi-ti-gang/">
        </link>
        <updated>2020-09-03T14:52:54.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p><strong>带着问题学，文档里介绍的功能在什么情况下使用？这些功能有什么用？具体使用方法直接查看官方文档！</strong></p>
</blockquote>
<blockquote>
<p><a href="https://laravel.com/docs/7.x/eloquent#mass-assignment">Mass assignment protection</a> is automatically disabled during database seeding.</p>
</blockquote>
<blockquote>
<p>Once you have written your seeder, you may need to regenerate Composer's autoloader using the <code>dump-autoload</code> command:</p>
<pre><code class="language-php">composer dump-autoload
</code></pre>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Laravel Database Migrations学习提纲]]></title>
        <id>https://dzkjz.github.io/post/laravel-database-migrations-xue-xi-ti-gang/</id>
        <link href="https://dzkjz.github.io/post/laravel-database-migrations-xue-xi-ti-gang/">
        </link>
        <updated>2020-09-03T14:12:50.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p><strong>带着问题学，文档里介绍的功能在什么情况下使用？这些功能有什么用？具体使用方法直接查看官方文档！</strong></p>
</blockquote>
<p>Migrations就类似于数据包的版本控制。</p>
<h4 id="creating-columns"><a href="https://laravel.com/docs/7.x/migrations#creating-columns">Creating Columns</a> 创建列</h4>
<h4 id="column-modifiers"><a href="https://laravel.com/docs/7.x/migrations#column-modifiers">Column Modifiers</a> 修饰列</h4>
<h4 id="modifying-columns"><a href="https://laravel.com/docs/7.x/migrations#modifying-columns">Modifying Columns</a> 修改列</h4>
<h4 id="dropping-columns"><a href="https://laravel.com/docs/7.x/migrations#dropping-columns">Dropping Columns</a>删除列</h4>
<h3 id="indexes"><a href="https://laravel.com/docs/7.x/migrations#indexes">Indexes</a></h3>
<pre><code class="language-php">$table-&gt;id()-&gt;unique();
$table-&gt;primary('id');
$table-&gt;spatialIndex('location');//除了sqlite以外的都支持
$table-&gt;primary(['id', 'parent_id']);
$table-&gt;unique('email');
$table-&gt;index(['account_id', 'created_at']);
$table-&gt;unique('email',
    'unique_email'// specify the index name yourself
);
$table-&gt;renameIndex('from', 'to');

</code></pre>
<h4 id="foreign-key-constraints"><a href="https://laravel.com/docs/7.x/migrations#foreign-key-constraints">Foreign Key Constraints</a></h4>
<pre><code class="language-php">//外键【一个表[users表]上的键[id]出现在别的表[orders表]上，就是外键[user_id]】添加
$table-&gt;foreign('user_id')-&gt;references('id')-&gt;on('users');


//作用同上
$table-&gt;foreignId('user_id')//unsignedBigInteger别名
-&gt;constrained();


$table-&gt;foreignId('user_id')//unsignedBigInteger别名
-&gt;constrained('users')//可以指定表名
-&gt;onDelete('cascade')//预期行为
;


$table-&gt;foreignId('user_id')//unsignedBigInteger别名
-&gt;nullable()//可在constrained前调用
-&gt;constrained();


$table-&gt;dropForeign('posts_user_id_foreign');//删除外键[存放在posts表中的user_id外键]

//也可以
$table-&gt;dropForeign(['user_id']);


//启动外键约束
// SQLite disables foreign key constraints by default.
// When using SQLite, make sure to enable foreign key support in your
// database configuration before attempting to create them in your migrations.
// In addition, SQLite only supports foreign keys upon creation of the table and not when tables are altered.
Schema::enableForeignKeyConstraints();

//取消外键约束
Schema::disableForeignKeyConstraints();
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Laravel Database Pagination学习提纲]]></title>
        <id>https://dzkjz.github.io/post/laravel-database-pagination-xue-xi-ti-gang/</id>
        <link href="https://dzkjz.github.io/post/laravel-database-pagination-xue-xi-ti-gang/">
        </link>
        <updated>2020-09-03T12:30:23.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p><strong>带着问题学，文档里介绍的功能在什么情况下使用？这些功能有什么用？具体使用方法直接查看官方文档！</strong></p>
</blockquote>
<p>默认情况下，分页的当前页码是在http的请求字符串page里的，后端会自动检测到，当然也会由分页器自动给插入到前端。</p>
<pre><code class="language-php">$users = DB::table('users')-&gt;paginate(15);
if ($users) {
    return view('user.index', ['users' =&gt; $users]);
}
//分页数据对于groupBy方法结果不太支持【目前】，如果确有需要，请自己实现

$users = DB::table('users')-&gt;simplePaginate(15);//前端只需要后一页，前一页的链接数据，而不是分页结果里每一页的链接地址数据


$users = \App\Models\User::paginate(15);

$users = \App\Models\User::where('votes', '&gt;', 100)-&gt;paginate(15);

$users = \App\Models\User::where('votes', '&gt;', 100)-&gt;simplePaginate(15);


//自定义分页器
// Illuminate\Pagination\Paginator[对应simplePaginate方法]
// or
// Illuminate\Pagination\LengthAwarePaginator【对应有paginate方法】
</code></pre>
<blockquote>
<p>View部分，如果使用laravel的前端，可以查看<a href="https://laravel.com/docs/7.x/pagination#customizing-the-pagination-view">Customizing The Pagination View</a>详细了解。以及前端的blade模板自定义，blade中paginator方法的调用<a href="https://laravel.com/docs/7.x/pagination#paginator-instance-methods">Paginator Instance Methods</a>。</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Laravel Database Query Builder学习提纲]]></title>
        <id>https://dzkjz.github.io/post/laravel-database-query-builder-xue-xi-ti-gang/</id>
        <link href="https://dzkjz.github.io/post/laravel-database-query-builder-xue-xi-ti-gang/">
        </link>
        <updated>2020-09-03T11:38:01.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>*<em>带着问题学，文档里介绍的功能在什么情况下使用？这些功能有什么用？具体使用方法直接查看官方文档！</em></p>
</blockquote>
<blockquote>
<p>The Laravel query builder uses PDO parameter binding to protect your application against SQL injection attacks. There is no need to clean strings being passed as bindings.</p>
</blockquote>
<pre><code class="language-php">//Retrieve single Row
$user = DB::table('users')-&gt;where('name', 'John')-&gt;first();
echo $user-&gt;name;

//Retrieve single row data's column value
$email = DB::table('users')-&gt;where('name', 'John')-&gt;value('email');

//Retrieve By ID
$user = DB::table('users')-&gt;find(3);


//Retrieve a list of column values
$titles = DB::table('roles')-&gt;pluck('title');
foreach ($titles as $title) {
    echo $title;
}

//
$roles = DB::table('roles')-&gt;pluck('title', 'name');
foreach ($roles as $name =&gt; $title) {
    echo $title;
}

//一次取一部分数据，分块获取，每一小块还可放进闭包里处理
DB::table('users')-&gt;orderBy('id')-&gt;chunk(100, function ($users) {
    foreach ($users as $user) {
        //
    }
});

DB::table('users')-&gt;orderBy('id')-&gt;chunk(100, function ($users) {
    //处理数据

    return false;//返回false表示停止处理然后退出返回
});


//如果你需要在闭包里处理及更新数据，一遍更新，一边取，如果是按修改时间取，那你修改了的就一直是最新，就一直在修改这一段，
//这个时候，建议使用chunkById方法，会依据数据的primary key排序
DB::table('users')-&gt;where('active', false)
    -&gt;chunkById(100, function ($users) {
        foreach ($users as $user) {
            DB::table('users')-&gt;where('id', $user-&gt;id)-&gt;update(['active' =&gt; true]);
        }
    });

//不过还需要注意，如果你的操作是增加或者删除数据，任何对primary key或者外键的修改，会影响chunk query结果。

/** Aggregates */
// count, max, min, avg, sum

$users = DB::table('users')-&gt;count();

$price = DB::table('orders')-&gt;max('price');

$price = DB::table('orders')
    -&gt;where('finalized', 1)
    -&gt;avg('price');

$exists = DB::table('orders')-&gt;where('finalized', 1)-&gt;exists();
$notExists = DB::table('orders')-&gt;where('finalized', 1)-&gt;doesntExist();

/** Selects */
$users = DB::table('users')-&gt;select('name', 'email as user_email')-&gt;get();

//唯一值
$users = DB::table('users')-&gt;distinct()-&gt;get();

//追加select限定
$query = DB::table('users')-&gt;select('name');
$users = $query-&gt;addSelect('age')-&gt;get();

//原生 表达式
$users = DB::table('users')
    -&gt;select(DB::raw('count(*) as user_count,status'))//原生语句会以字符串的形式注入到sql query种，一定要避免sql注入
    -&gt;where('status', '&lt;&gt;', 1)
    -&gt;groupBy('status')
    -&gt;get();

//selectRaw
$orders = DB::table('orders')
    -&gt;selectRaw('price * ? as price_with_tax', [1.0825])//接受第二个参数作为第一语句中'?'的绑定值
    -&gt;get();

DB::table('orders')
    -&gt;whereRaw('price &gt; IF(state = &quot;TX&quot;,?,100)', [200])
    -&gt;get();

DB::table('orders')-&gt;select('department', DB::raw('SUM(price) as total_sales'))
    -&gt;groupBy('department')
    -&gt;havingRaw('SUM(price)&gt;?', [2500]) //haveRaw和orHavingRaw方法可用于将原始字符串设置为having子句的值
    -&gt;get();


//orderByRaw方法可用于将原始字符串设置为order by子句的值：
DB::table('orders')-&gt;orderByRaw('updated_at - created_at DESC')-&gt;get();

//groupByRaw方法可用于将原始字符串设置为group by子句的值：
DB::table('orders')-&gt;select('city', 'state')-&gt;groupByRaw('city,state')-&gt;get();


//Joins
//Unions
//Where Clauses
//Ordering, Grouping, Limit &amp; Offset
//Conditional Clauses
$role = $request-&gt;input('role');
DB::table('users')
    -&gt;when($role, function ($query, $role) {
        $query-&gt;where('role_id', $role);
    })-&gt;get();
//Inserts
//Updates
//Deletes
//Pessimistic Locking
//Debugging
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Laravel Database学习提纲]]></title>
        <id>https://dzkjz.github.io/post/laravel-database-xue-xi-ti-gang/</id>
        <link href="https://dzkjz.github.io/post/laravel-database-xue-xi-ti-gang/">
        </link>
        <updated>2020-09-02T16:27:12.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>*<em>带着问题学，文档里介绍的功能在什么情况下使用？这些功能有什么用？具体使用方法直接查看官方文档！</em></p>
</blockquote>
<p>Laravel支持多种SQL数据库，如果需要查看每个数据库怎么配置，请查看官方文档<a href="https://laravel.com/docs/7.x/database#configuration">Configuration</a></p>
<p>使用了多个数据库链接的情况下，如果要指定选其中一个链接来处理，可以参考<a href="https://laravel.com/docs/7.x/database#using-multiple-database-connections">Using Multiple Database Connections</a></p>
<blockquote>
<p>DB facade支持的增删改查方法，详细的请看官方文档<a href="https://laravel.com/docs/7.x/database#running-queries">Running Raw SQL Queries</a></p>
</blockquote>
<h3 id="listening-for-query-events"><a href="https://laravel.com/docs/7.x/database#listening-for-query-events">Listening For Query Events</a></h3>
<p>每个SQL请求都会触发事件，如果需要log这些query或者debug，可以使用<code>DB::listen</code>方法。</p>
<blockquote>
<p>详细请看<a href="https://laravel.com/docs/7.x/database#listening-for-query-events">Listening For Query Events</a></p>
</blockquote>
<h3 id="数据库事务database-transactions">数据库事务<a href="https://laravel.com/docs/7.x/database#database-transactions">Database Transactions</a></h3>
<pre><code class="language-php">$users = DB::connection('mysql')-&gt;select('');

//获取底层的pdo实例
$pdo = DB::connection()-&gt;getPdo();

// The select method will always return an array of results.
// Each result within the array will be a PHP stdClass object,
// allowing you to access the values of the results:
$users = DB::select('select * from users where active = ?', [1]);
if ($users) {
    return view('user.index', ['users' =&gt; $users]);
}

foreach ($users as $user) {
    echo $user-&gt;name;
}

//Naming bindings

$results = DB::select('select * from users where id =:id', ['id' =&gt; 1]);


//insert
DB::insert('insert into users(id,name) values(?,?)', [1, 'Dayle']);

//update
$affected = DB::update('update users set votes = 100 where name= ? ', ['John']);


//delete
$deleted = DB::delete('delete from users'); // the number of rows affected will be returned:


//statement
// Some database statements do not return any value.
// For these types of operations, you may use the statement method on the DB facade:
DB::statement('drop table users');


//Database Transactions 数据库事务，闭包内事务如果执行异常，会自动回滚处理，如果成功，事务就会自动完成执行
DB::transaction(function () {
    DB::table('users')-&gt;update(['votes' =&gt; 1]);
    DB::table('posts')-&gt;delete();
});


DB::transaction(function () {
    DB::table('users')-&gt;update(['votes' =&gt; 1]);
    DB::table('posts')-&gt;delete();
}, 5);//第二个参数作用，如果出现死锁，会最大尝试5次，超次就会抛异常

//手动启动事务执行
DB::beginTransaction();
//手动回滚
DB::rollBack();
//手动提交事务
DB::commit();
</code></pre>
]]></content>
    </entry>
</feed>