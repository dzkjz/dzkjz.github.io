<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    JojoLegend
</title>
<link rel="shortcut icon" href="https://dzkjz.github.io//favicon.ico?v=1599144780023">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://dzkjz.github.io//styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://dzkjz.github.io//media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://dzkjz.github.io/">
                <img class="avatar" src="https://dzkjz.github.io//images/avatar.png?v=1599144780023" alt="">
            </a>
            <div class="site-title">
                <h1>
                    JojoLegend
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    首页
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    归档
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    标签
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    关于
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/vue" class="menu">
                                    Vue
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-container main-container">
                <div id="content" class="main-container-left">
                    
        
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://dzkjz.github.io/post/laravel-http-client-xue-xi-ti-gang/">
                        Laravel HTTP Client 学习提纲
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-09-01</time>
                    
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            
带着问题学，文档里介绍的功能在什么情况下使用？这些功能有什么用？具体使用方法直接查看官方文档！

如果有需要向外发送HTTP请求，因为Laravel包裹了Guzzle，可以执行HTTP请求处理。不过需要提前执行composer require guzzlehttp/guzzle安装。
对于包含的guzzle请求，响应结果处理，异常处理，和发送方法，以及Http使用fake方法测试及asset断言，都参考官方文档

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://dzkjz.github.io/post/laravel-http-client-xue-xi-ti-gang/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://dzkjz.github.io/post/laravel-file-storagefilesystem-xue-xi-ti-gang/">
                        Laravel File Storage[FileSystem] 学习提纲
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-09-01</time>
                    
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            
带着问题学，文档里介绍的功能在什么情况下使用？这些功能有什么用？具体使用方法直接查看官方文档！


​	Laravel提供了强大的文件抽象特性。


对于文件存取，文件夹存取，disk配置，与Request交互，文件数据更新，追加数据，文件属性信息获取，文件URL获取与配置，以及自定义文件系统，请查看官方文档。


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://dzkjz.github.io/post/laravel-file-storagefilesystem-xue-xi-ti-gang/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://dzkjz.github.io/post/laravel-collection-xue-xi-ti-gang/">
                        Laravel Collection 学习提纲
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-08-31</time>
                    
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            
带着问题学习，文档上介绍的功能在什么时候可以用？用来做什么？具体的用法请查看官方文档



Collection主要是用来提供更方便的方法处理array数据的；


并且collection里方法都是返回一个新的collection实例，意味着可以写出面条代码，而原来的底层数据就不会被修改，就会完整的保留下来。


Eloquent查询的结果基本上也是返回的collection实例。



Collection有很多的方法，查看官方文档Available Methods

Higher Order Messages

平时的方法：
$users = User::where(&#39;votes&#39;, &#39;&amp;gt;&#39;, 500)-&amp;gt;get();

$users-&amp;gt;each(function($item,$key){
    $item-&amp;gt;markAsVip();
});

如each：
$users = User::where(&#39;votes&#39;, &#39;&amp;gt;&#39;, 500)-&amp;gt;get();

$users-&amp;gt;each-&amp;gt;markAsVip();


LazyCollection
对于需要读取大文件，数据量比较大的数据【10万条Eloquent模型数据】到collection里面，可以用LazyCollection，底层主要是PHP yield，这样不用一次性读取完到内存，而是一次一取一读。

如果10万条数据一次用这种方式读取，那内存占用太大了：
$users = App\User::all()-&amp;gt;filter(function ($user) {
 return $user-&amp;gt;id &amp;gt; 500;
});

Eloquent有一个cursor方法返回的是LazyCollection实例，一次读取一条，这样内存不会卡爆：

$users = App\User::cursor()-&amp;gt;filter(function ($user) {
return $user-&amp;gt;id &amp;gt; 500;
});

foreach ($users as $user) {
echo $user-&amp;gt;id;
}


当然，filter方法并不会在foreach之前就执行，而是在foreach中每次迭代的时候执行。

LazyCollection 有2个与Collection不同的方法可以看下官方文档Lazy Collection Methods

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://dzkjz.github.io/post/laravel-collection-xue-xi-ti-gang/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://dzkjz.github.io/post/laravel-cache-xue-xi-ti-gang/">
                        Laravel Cache学习提纲
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-08-30</time>
                    
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            
带着问题学：文档上介绍的功能在什么情况下使用，有什么作用？


一般建议使用Memcached或者Redis。

Cache使用方法

Cache的增删改查具体使用方法，请查看官方文档。
利用Mock方式进行Cache测试的时候，需要调用Cache::shouldReceive方法提供值。

Cache Tags
给一堆的Cache值分组打标签需用到Cache Tags。

Cache Tags 不被file 、dynamodb及 database驱动所支持，特别是如果需要使用多Tags的永久存储，memcached驱动时最优选择，性能最好，并自动清楚陈旧记录值。


Cache Tags的增删改读请查看官方文档

原子锁
原子锁只有在memcached,dynamodb,redis,database,array作为cache驱动的时候才能被使用。而且所有的servers【从属服务器】都必须与相同的中央cache server【主服务器】通信。

每个类型的驱动如何配置，原子锁的具体使用，方法调用请查看官方文档


跨进程管理原子锁，比如http请求的时候加锁，但是解锁是放在queue job或者某个事件触发逻辑之后。具体请查看官方文档

添加自定义Cache驱动

参考 Adding Custom Cache Drivers

事件

Cache的操作会触发事件，如果有需要监听这些事件做响应的操作，可以设置监听器，设置在EventServiceProvider类中，具体参考Events


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://dzkjz.github.io/post/laravel-cache-xue-xi-ti-gang/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://dzkjz.github.io/post/laravel-broadcasting-xue-xi-ti-gang/">
                        Laravel Broadcasting 学习提纲
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-08-30</time>
                    
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            1.思考每一个模块，功能有什么用，什么时候可以用到？
主要就是通过利用WebSocket技术实现服务端对用户端的信息更新推送。
提前需要知道Event【事件】和Listeners 【监听器】如何用。

详细一点，就是利用Pusher和Redis作为驱动，log一般是测试的时候用，自己可以参考 laravel-websockets实现一个，通过WebSocket，实现Laravel服务端把事件广播到客户端的JavaScript应用上。
事件广播用到的信道，具体分公共和私有信道，公共的信道，任何用户可以不经授权和认证就可以订阅接受，私有的就必须认证和授权了。

使用举例：


假定有一个给用户查看订单发货状态的页面；


订单运输状态发生改变就会触发一个ShippingStatusUpdated事件。



event(new ShippingStatusUpdated($update));

当用户挂在这个页面，即使不需要刷新。也可以在运单状态改变的时候通过广播到应用的方式进行运单状态的更新。

只需要实现ShouldBroadcast接口即可；具体实现看官方文档。


对于需要私有信道的，可以看Authorizing Channels。就是JS应用向后端发送HTTP请求，后端鉴权搞定就可以了，使用Laravel Echo的话，这些都是默认实现好了的。不过，需要定义相应的routes来响应这些请求。

路由及其他的配置见官方文档。

如果你的应用在routes/channels.php中配置有太多的channel，会非常的臃肿，这个时候，就建议执行php artisan make:channel OrderChannel这个artisan命令添加channel类【位于App\Broadcasting文件夹】，其实就很类似于http请求的routes了；把channels.php文件里面的闭包就换成类名Broadcast::channel(&#39;order.{order}&#39;, OrderChannel::class);具体代码就在channel类的join方法里面处理。

更多的参考官方文档

对于一个事件广播需要排除当前用户【客户端】的，一般是使用toOthers()方法，事件类需要使用Illuminate\Broadcasting\InteractsWithSocketstrait来调用toOthers()方法。

​	However, remember that we also broadcast the task&#39;s creation. If your JavaScript application is listening for this event in order to add tasks to the task list, you will have duplicate tasks in your list: one from the end-point and one from the broadcast. You may solve this by using the toOthers method to instruct the broadcaster to not broadcast the event to the current user.

场景就是，用户发布了一个任务，然后axios的response获取到该任务更新，同时这个任务更新被事件广播出去，前端代码通过事件广播将用户们的任务列表+1，其他用户接收到了，本用户也接受到了，相当于当前用户收到了两次响应，这样就重复了，使用toOthers方法就可以不通知当前用户，这样就不会重复。


默认情况下，Vue+Axios已经实现了客户端的处理逻辑，也可以自定义，具体的看官方文档：Only To Others。


在线状态频道【我愿称之为局域网】，可以实现比如bilibili在线观看人数实时变动的功能。用户多一个，大家的在线观看人数都显示+1，当然更精细的可以做到，谁加入了直播间这种提示。肯定也就是private信道，而且用户还必须过channel鉴权，不然怎么统计用户信息？

也因此，鉴权的回调函数不是返回true值，而是一个包含用户数据的array，这个数据会被其他事件广播监听的用户所使用，如果没有被授权或授权失败，返回false或者null。


如果需要做聊天室类的应用或者功能可以参考官方文档。

如果需要一个比如“正在输入”的状态提示给其他用户，而不用通知到后端，只需要一个很轻量简洁的功能，触发方使用Echo的whisper方法，接收方使用listenForWhisper即可。

具体参考官方文档

需要Notification也使用BroadCasting服务，不需要刷新就可以通知到前端，
请先参考the broadcast notification channel配置Notification，然后前端参考官方文档进行Notification广播的监听即可。
2.具体用法只需要了解【不使用的时候是记不住的】，具体要用再查官方文档。

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://dzkjz.github.io/post/laravel-broadcasting-xue-xi-ti-gang/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://dzkjz.github.io/post/laradock-win10/">
                        Laradock Win10 
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-08-15</time>
                    
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            参考官方的文档 以及在 Mac/Windows 系统中使用 Laradock 搭建基于 Docker 的 Laravel 开发环境安装
给👴一直报错。

ERROR: for postgres  Cannot create container for service postgres: status code not OK but 500: {&amp;quot;Message&amp;quot;:&amp;quot;Unhandled exception: Filesharing has been cancelled&amp;quot;,&amp;quot;StackTrace&amp;quot;:&amp;quot;   at Docker.ApiServices.Mounting.FileSharing.&amp;lt;**DoShareAsync**&amp;gt;d__6.MoveNext() in C:\workspaces\stable-2.3.x\src\github.com\docker\pinata\win\src\Docker.ApiServices\Mounting\FileSharing.cs:line 0\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\r\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\r\n   at Docker.ApiServices.Mounting.FileSharing.&amp;lt;**ShareAsync**&amp;gt;d__4.MoveNext() in C:\workspaces\stable-2.3.x\src\github.com\docker\pinata\win\src\Docker.ApiServices\Mounting\FileSharing.cs:line 47\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\r\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\r\n   at Docker.HttpApi.Controllers.FilesharingController.&amp;lt;**ShareDirectory**&amp;gt;d__2.MoveNext() in C:\workspaces\stable-2.3.x\src\github.com\docker\pinata\win\src\Docker.HttpApi\Controllers\FilesharingController.cs:line 21\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\r\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\r\n   at System.Threading.Tasks.TaskHelpersExtensions.&amp;lt;**CastToObject**&amp;gt;d__1`1.MoveNext()\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\r\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\r\n   at System.Web.Http.Controllers.ApiControllerActionInvoker.&amp;lt;**InvokeActionAsyncCore**&amp;gt;d__1.MoveNext()\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\r\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\r\n   at System.Web.Http.Controllers.ActionFilterResult.&amp;lt;**ExecuteAsync**&amp;gt;d__5.MoveNext()\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\r\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\r\n   at System.Web.Http.Dispatcher.HttpControllerDispatcher.&amp;lt;**SendAsync**&amp;gt;d__15.MoveNext()&amp;quot;}	


反正就是这类，没截完，
根据
https://github.com/docker/for-win/issues/5456
https://stackoverflow.com/questions/59942110/docker-drive-has-not-been-shared
https://forums.docker.com/t/cannot-share-drive-in-windows-10/28798
以及

Laradock遇到的坑


就是设置FILESHARING 里添加需要sharing的C盘和D盘就ok了。

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://dzkjz.github.io/post/laradock-win10/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://dzkjz.github.io/post/vue-zhi-inheritattrshttpscnvuejsorgv2apiinheritattrs/">
                        Vue之inheritAttrs
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-08-13</time>
                    
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            参考what are inheritAttrs:false and $attrs used for in vue?：

// Component
Vue.component(&#39;base-input&#39;, {
 inheritAttrs: false,
 props: [&#39;label&#39;, &#39;value&#39;],
 template: `
   &amp;lt;label&amp;gt;
     {{ label }}
     &amp;lt;input
       v-bind=&amp;quot;$attrs&amp;quot;
       v-bind:value=&amp;quot;value&amp;quot;
       v-on:input=&amp;quot;$emit(&#39;input&#39;, $event.target.value)&amp;quot;
     &amp;gt;
   &amp;lt;/label&amp;gt;
 `
})

// Usage
&amp;lt;base-input
 v-model=&amp;quot;username&amp;quot;
 required
 placeholder=&amp;quot;Enter your username&amp;quot;
/&amp;gt;

The required and placeholder attributes are then set on the input instead of the wrapping label.
It doesn&#39;t really have anything to do with children of children of components but it can be used in such a hierarchy.
I hope that clears things up for you.
上面的示例代码来自 Disabling Attribute Inheritance官方文档。
其实就是 inheritAttrs设置为false值之后，
使用的
&amp;lt;base-input
 v-model=&amp;quot;username&amp;quot;
 required
 placeholder=&amp;quot;Enter your username&amp;quot;

这里面设置的 required 和 placeholder就不在模板根元素label上，而是在指定了$attrs的
&amp;lt;input
       v-bind=&amp;quot;$attrs&amp;quot;

input标签上。参考这个，以后要用的就是你想设置到哪里，就设置$attrs到哪里，一般这个用在自定义基础组件base components的上面。


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://dzkjz.github.io/post/vue-zhi-inheritattrshttpscnvuejsorgv2apiinheritattrs/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://dzkjz.github.io/post/vue-zhi-zuo-yong-yu-cha-cao/">
                        Vue 之 作用域插槽
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-08-12</time>
                    
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            参考其他示例
其实
 &amp;lt;slot name=&amp;quot;todo&amp;quot; v-bind:todo=&amp;quot;todo&amp;quot;&amp;gt;
      &amp;lt;!-- 后备内容 --&amp;gt;
      {{ todo.text }}
    &amp;lt;/slot&amp;gt;

就是把子组件中的 todo 暴露给外层组件
然后外层组件就可以通过
 &amp;lt;template v-slot:todo=&amp;quot;{ todo }&amp;quot;&amp;gt;
    &amp;lt;span v-if=&amp;quot;todo.isComplete&amp;quot;&amp;gt;✓&amp;lt;/span&amp;gt;
    {{ todo.text }}
  &amp;lt;/template&amp;gt;

这里面用了{todo}解构出上面slot的:todo其值为上面那个组件中的todo值，
暴露出来在外层组件的template里面，就可以访问了：todo.isComplete及{{ todo.text }}就是从外层访问的子组件中的值。
slot只能通过这种方式由内而外，被外层访问到。
需要注意的是，之前版本是slot-scope=&amp;quot;slotProps&amp;quot;这种方式访问的，但是已经被废弃了。

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://dzkjz.github.io/post/vue-zhi-zuo-yong-yu-cha-cao/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://dzkjz.github.io/post/zi-ding-yi-zu-jian-de-v-model/">
                        自定义组件的 v-model
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-08-11</time>
                    
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            自定义组件的 v-model
一个组件上的 v-model 默认会利用名为 value 的 prop 和名为 input 的事件，但是像单选框、复选框等类型的输入控件可能会将 value attribute 用于不同的目的。model 选项可以用来避免这样的冲突：
Vue.component(&#39;base-checkbox&#39;, {
  model: {
    prop: &#39;checked&#39;,
    event: &#39;change&#39;
  },
  props: {
    checked: Boolean
  },
  template: `
    &amp;lt;input
      type=&amp;quot;checkbox&amp;quot;
      v-bind:checked=&amp;quot;checked&amp;quot;
      v-on:change=&amp;quot;$emit(&#39;change&#39;, $event.target.checked)&amp;quot;
    &amp;gt;
  `
})

现在在这个组件上使用 v-model 的时候：
&amp;lt;base-checkbox v-model=&amp;quot;lovingVue&amp;quot;&amp;gt;&amp;lt;/base-checkbox&amp;gt;

这里的 lovingVue 的值将会传入这个名为 checked 的 prop。同时当 &amp;lt;base-checkbox&amp;gt; 触发一个 change 事件并附带一个新的值的时候，这个 lovingVue 的 property 将会被更新。
注意你仍然需要在组件的 props 选项里声明 checked 这个 prop。
就是说：
默认情况下：
&amp;lt;base-checkbox v-model=&amp;quot;lovingVue&amp;quot;&amp;gt;&amp;lt;/base-checkbox&amp;gt;
lovingVue会对应到base-checkbox里面的value值，但是如果外层component需要的是使用这个base-checkboxcomponent的其他属性，那就用
  model: {
    prop: &#39;checked&#39;,
    event: &#39;change&#39;
  },

这种方式；
v-model=&amp;quot;lovingVue&amp;quot;对应到的就是base-checkboxcomponent里面的checked属性，这个属性必须在该组件props里声明，
且
v-on:change=&amp;quot;$emit(&#39;change&#39;, $event.target.checked)&amp;quot;

以及
 model: {
    prop: &#39;checked&#39;,
    event: &#39;change&#39;
  },

中的event: &#39;change&#39;都不可省略，还必须对应，抛出的事件和model里的事件必须一样。
拓展分析：
有这样一个组件
//BaseInput.vue
&amp;lt;template&amp;gt;
    &amp;lt;label class=&amp;quot;inner base&amp;quot;&amp;gt;
        {{ label }} : {{value}}
        &amp;lt;input :placeholder=&amp;quot;$attrs[&#39;placej&#39;]&amp;quot;
               :value=&amp;quot;value&amp;quot;
               @input=&amp;quot;$emit(&#39;inputa&#39;, $event.target.value)&amp;quot;&amp;gt;
    &amp;lt;/label&amp;gt;
&amp;lt;/template&amp;gt;

&amp;lt;script&amp;gt;
    export default {
        name: &amp;quot;BaseInput&amp;quot;,
        inheritAttrs: false,
        props: [&#39;label&#39;, &#39;value&#39;],
        model: {
            prop: &#39;label&#39;,
            event: &#39;inputa&#39;
        }
    }
&amp;lt;/script&amp;gt;

&amp;lt;style scoped&amp;gt;

&amp;lt;/style&amp;gt;

外层组件
&amp;lt;template&amp;gt;
    &amp;lt;div &amp;gt;
        &amp;lt;BaseInput class=&amp;quot;outter home&amp;quot; placej=&amp;quot;aj&amp;quot; v-model=&amp;quot;bi&amp;quot;&amp;gt;&amp;lt;/BaseInput&amp;gt;
    &amp;lt;/div&amp;gt;
&amp;lt;/template&amp;gt;

&amp;lt;script&amp;gt;
    export default {
        name: &#39;Home&#39;,
        data() {
            return {
                bi: &#39;&#39;,
            }
        },
    }
&amp;lt;/script&amp;gt;

&amp;lt;style scoped&amp;gt;

&amp;lt;/style&amp;gt;


流程分析：
首先BaseInput.vue中两个属性props: [&#39;label&#39;, &#39;value&#39;]是空值。接下来，当输入的时候，input事件触发，在BaseInput.vue中
@input=&amp;quot;$emit(&#39;inputa&#39;, $event.target.value)&amp;quot;，抛出inputa事件，值为input更加底层的value即$event.target.value抛出；
然后由于
 model: {
            prop: &#39;label&#39;,
            event: &#39;inputa&#39;
        }

所以，label值被设置为这个$event.target.value的值，并v-model=&amp;quot;bi&amp;quot;设置到外层组件的bi值，同时，value值因为:value=&amp;quot;value&amp;quot;而该组件中value为空，则一旦触发input事件，这个:value又被重置为空，输入框值也就被清空。

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://dzkjz.github.io/post/zi-ding-yi-zu-jian-de-v-model/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://dzkjz.github.io/post/vue-zhi-dollarattrs/">
                        Vue 之 $attrs
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-08-11</time>
                    
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            参考Using v-model + $attrs on Vue Components：
&amp;lt;template&amp;gt;
  &amp;lt;div&amp;gt;
    &amp;lt;label for=&amp;quot;name&amp;quot; :class=&amp;quot;label_cls&amp;quot;&amp;gt;Name&amp;lt;/label&amp;gt;
    &amp;lt;input :class=&amp;quot;input_cls&amp;quot; id=&amp;quot;name&amp;quot; v-model=&amp;quot;$attrs.value.name&amp;quot;&amp;gt;
    &amp;lt;label for=&amp;quot;role&amp;quot; :class=&amp;quot;label_cls&amp;quot;&amp;gt;Title&amp;lt;/label&amp;gt;
    &amp;lt;input :class=&amp;quot;input_cls&amp;quot; id=&amp;quot;role&amp;quot; v-model=&amp;quot;$attrs.value.role&amp;quot;&amp;gt;
    &amp;lt;label for=&amp;quot;email&amp;quot; :class=&amp;quot;label_cls&amp;quot;&amp;gt;Email&amp;lt;/label&amp;gt;
    &amp;lt;input :class=&amp;quot;input_cls&amp;quot; id=&amp;quot;email&amp;quot; v-model=&amp;quot;$attrs.value.email&amp;quot;&amp;gt;
    &amp;lt;label for=&amp;quot;insta&amp;quot; :class=&amp;quot;label_cls&amp;quot;&amp;gt;Instagram&amp;lt;/label&amp;gt;
    &amp;lt;input :class=&amp;quot;input_cls&amp;quot; id=&amp;quot;insta&amp;quot; v-model=&amp;quot;$attrs.value.insta&amp;quot; autocomplete=&amp;quot;insta_off&amp;quot;&amp;gt;
  &amp;lt;/div&amp;gt;
&amp;lt;/template&amp;gt;

&amp;lt;script&amp;gt;
import { mapGetters } from &amp;quot;vuex&amp;quot;;
export default {
  name: &amp;quot;UserFields&amp;quot;,
  computed: {
    input_cls() {
      return &amp;quot;w-full appearance-none border rounded py-2 px-3 mb-6 text-grey-darkest&amp;quot;;
    },
    label_cls() {
      return &amp;quot;text-grey-darker font-light inline-block mb-2&amp;quot;;
    }
  }
};
&amp;lt;/script&amp;gt;

&amp;lt;template&amp;gt;
  &amp;lt;div class=&amp;quot;w-5/6 md:w-3/4 lg:w-2/3 mx-auto mt-8&amp;quot; v-if=&amp;quot;activeUser&amp;quot;&amp;gt;
    &amp;lt;h2 class=&amp;quot;font-light&amp;quot;&amp;gt;Account Settings&amp;lt;/h2&amp;gt;
    &amp;lt;div class=&amp;quot;flex mt-8 pt-8 border-t border-grey-light&amp;quot;&amp;gt;
      &amp;lt;div class=&amp;quot;w-64 hidden md:block&amp;quot;&amp;gt;
        &amp;lt;div class=&amp;quot;mb-2&amp;quot;&amp;gt;Profile&amp;lt;/div&amp;gt;
        &amp;lt;span class=&amp;quot;text-xs text-grey-dark&amp;quot;&amp;gt;
          Keep your user infomation up to date so that team members can contact
          you.
        &amp;lt;/span&amp;gt;
      &amp;lt;/div&amp;gt;
      &amp;lt;form @submit.prevent=&amp;quot;updateUser(user);&amp;quot; class=&amp;quot;flex flex-col md:ml-8 w-full&amp;quot;&amp;gt;
        &amp;lt;UserFields v-model=&amp;quot;user&amp;quot;/&amp;gt;
        &amp;lt;div class=&amp;quot;flex items-center&amp;quot;&amp;gt;
          &amp;lt;input
            class=&amp;quot;bg-blue hover:bg-blue-dark text-white font-normal py-2 px-4 my-6 rounded w-48 tracking-wide&amp;quot;
            type=&amp;quot;submit&amp;quot;
            value=&amp;quot;Submit&amp;quot;
          &amp;gt;
        &amp;lt;/div&amp;gt;
      &amp;lt;/form&amp;gt;
    &amp;lt;/div&amp;gt;
  &amp;lt;/div&amp;gt;
&amp;lt;/template&amp;gt;
&amp;lt;script&amp;gt;
import { mapGetters, mapActions } from &amp;quot;vuex&amp;quot;;
import UserFields from &amp;quot;./UserFields.vue&amp;quot;;
export default {
  name: &amp;quot;UserForm&amp;quot;,
  components: {
    UserFields
  },
  data() {
    return {
      user: {}
    };
  },
  mounted() {
    this.getUser();
  },
  computed: {
    ...mapGetters([&amp;quot;activeUser&amp;quot;])
  },
  methods: {
    ...mapActions([&amp;quot;getUser&amp;quot;, &amp;quot;updateUser&amp;quot;]),
    updateLocalUser(e) {
      this.$set(this.user, e.target.id, e.target.value);
    }
  },
  watch: {
    activeUser: {
      handler() {
        this.user = { ...this.activeUser };
      }
    },
    immediate: true
  }
};
&amp;lt;/script&amp;gt;


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://dzkjz.github.io/post/vue-zhi-dollarattrs/">Read More ~</a>
                            </div>
                </div>
            </article>
            
                <!-- 翻页 -->
                
    <div class="pagination-container">
        
            <a href="https://dzkjz.github.io/" class="page-btn btn">上一页</a>
            
                
                    <a href="https://dzkjz.github.io/page/3/" class="page-btn btn">下一页</a>
                    
    </div>
    
                </div>
                <!--  -->
                <div class="main-container-middle"></div>
                <!--  -->
                <div id="sidebar" class="main-container-right">

                    <!-- 个人信息 -->
                    
    <div class="id_card i-card">
        <div class="id_card-avatar" style="background-image: url(https://dzkjz.github.io//images/avatar.png?v=1599144780023)">
        </div>
        <h1 class="id_card-title">
            JojoLegend
        </h1>
        <h2 class="id_card-description">
            Something for age
        </h2>
        <!--  -->
        <div class="id_card-sns">
            <!-- github -->
            
                    <!-- twitter -->
                    
                            <!-- weibo -->
                            
                                    <!-- facebook -->
                                    

        </div>
    </div>
    

                        <!-- 公告栏 -->
                        

                </div>
            </div>



            <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://dzkjz.github.io//atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
</body>

</html>